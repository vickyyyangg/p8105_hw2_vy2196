p8105_hw2_vy2196
================

### Problem 1

``` r
library(tidyverse)

pols_month_df = read_csv(file = "data/pols-month.csv") |>
    # break up the variable 
    separate(mon, into = c("year", "month", "day"), sep = "-") |>
  # replace month number with month name
  mutate(
    year = as.integer(year),
    month = factor(month.name[as.integer(month)],
                   levels = month.name, ordered = TRUE),
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem")) |>
  select(-prez_gop, -prez_dem, -day)
pols_month_df
```

    ## # A tibble: 822 × 9
    ##     year month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <int> <ord>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1  1947 January        23      51     253      23      45     198 dem      
    ##  2  1947 February       23      51     253      23      45     198 dem      
    ##  3  1947 March          23      51     253      23      45     198 dem      
    ##  4  1947 April          23      51     253      23      45     198 dem      
    ##  5  1947 May            23      51     253      23      45     198 dem      
    ##  6  1947 June           23      51     253      23      45     198 dem      
    ##  7  1947 July           23      51     253      23      45     198 dem      
    ##  8  1947 August         23      51     253      23      45     198 dem      
    ##  9  1947 September      23      51     253      23      45     198 dem      
    ## 10  1947 October        23      51     253      23      45     198 dem      
    ## # ℹ 812 more rows

``` r
snp_df = read_csv(file = "data/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c("month", "day", "year"), 
           sep = "/", convert = TRUE) |>
  mutate(
    year = ifelse(year < 50, 2000 + year,
                     ifelse(year < 100, 1900 + year, year)),
    year = as.integer(year)) |>
  mutate(month = factor(month(month, label = TRUE, abbr = FALSE),
                   levels = month.name, ordered = TRUE)) |>
  arrange(year, month) |>
  select(year, month, everything(), -day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df
```

    ## # A tibble: 787 × 3
    ##     year month     close
    ##    <int> <ord>     <dbl>
    ##  1  1950 January    17.0
    ##  2  1950 February   17.2
    ##  3  1950 March      17.3
    ##  4  1950 April      18.0
    ##  5  1950 May        18.8
    ##  6  1950 June       17.7
    ##  7  1950 July       17.8
    ##  8  1950 August     18.4
    ##  9  1950 September  19.5
    ## 10  1950 October    19.5
    ## # ℹ 777 more rows

``` r
unemployment_df = read_csv(file = "data/unemployment.csv") |>
  # switch from wide to long
    pivot_longer(
      cols = Jan:Dec,
      names_to = "month",
      values_to = "unemployment") |>
  # Rename Year to year
  rename(year = Year) |>
  # Convert abbreviations to full month names
  mutate(
    year = as.integer(year),
    month = recode(month,
                   "Jan" = "January",
                   "Feb" = "February",
                   "Mar" = "March",
                   "Apr" = "April",
                   "May" = "May",
                   "Jun" = "June",
                   "Jul" = "July",
                   "Aug" = "August",
                   "Sep" = "September",
                   "Oct" = "October",
                   "Nov" = "November",
                   "Dec" = "December"),
    month = factor(month, levels = month.name, ordered = TRUE)) |>
  arrange(year, month) |>
  select(year, month, unemployment)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df
```

    ## # A tibble: 816 × 3
    ##     year month     unemployment
    ##    <int> <ord>            <dbl>
    ##  1  1948 January            3.4
    ##  2  1948 February           3.8
    ##  3  1948 March              4  
    ##  4  1948 April              3.9
    ##  5  1948 May                3.5
    ##  6  1948 June               3.6
    ##  7  1948 July               3.6
    ##  8  1948 August             3.9
    ##  9  1948 September          3.8
    ## 10  1948 October            3.7
    ## # ℹ 806 more rows

``` r
merged_data = 
  left_join(pols_month_df, snp_df, by = c("year", "month")) |> 
  left_join(x = _, y = unemployment_df, by = c("year", "month")) 
names(merged_data)
```

    ##  [1] "year"         "month"        "gov_gop"      "sen_gop"      "rep_gop"     
    ##  [6] "gov_dem"      "sen_dem"      "rep_dem"      "president"    "close"       
    ## [11] "unemployment"

``` r
glimpse(merged_data)
```

    ## Rows: 822
    ## Columns: 11
    ## $ year         <int> 1947, 1947, 1947, 1947, 1947, 1947, 1947, 1947, 1947, 194…
    ## $ month        <ord> January, February, March, April, May, June, July, August,…
    ## $ gov_gop      <dbl> 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 22, 22, 2…
    ## $ sen_gop      <dbl> 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51, 53, 53, 5…
    ## $ rep_gop      <dbl> 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 25…
    ## $ gov_dem      <dbl> 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 2…
    ## $ sen_dem      <dbl> 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 48, 48, 4…
    ## $ rep_dem      <dbl> 198, 198, 198, 198, 198, 198, 198, 198, 198, 198, 198, 19…
    ## $ president    <chr> "dem", "dem", "dem", "dem", "dem", "dem", "dem", "dem", "…
    ## $ close        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
    ## $ unemployment <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 3.4, 3.8,…

``` r
merged_data
```

    ## # A tibble: 822 × 11
    ##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <int> <ord>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1  1947 January      23      51     253      23      45     198 dem          NA
    ##  2  1947 Februa…      23      51     253      23      45     198 dem          NA
    ##  3  1947 March        23      51     253      23      45     198 dem          NA
    ##  4  1947 April        23      51     253      23      45     198 dem          NA
    ##  5  1947 May          23      51     253      23      45     198 dem          NA
    ##  6  1947 June         23      51     253      23      45     198 dem          NA
    ##  7  1947 July         23      51     253      23      45     198 dem          NA
    ##  8  1947 August       23      51     253      23      45     198 dem          NA
    ##  9  1947 Septem…      23      51     253      23      45     198 dem          NA
    ## 10  1947 October      23      51     253      23      45     198 dem          NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: unemployment <dbl>
